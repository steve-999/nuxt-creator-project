(window.webpackJsonp=window.webpackJsonp||[]).push([[28,7],{255:function(t,e,r){"use strict";r.d(e,"b",(function(){return d})),r.d(e,"g",(function(){return f})),r.d(e,"d",(function(){return _})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return m})),r.d(e,"i",(function(){return v})),r.d(e,"h",(function(){return y})),r.d(e,"f",(function(){return w})),r.d(e,"e",(function(){return M})),r.d(e,"j",(function(){return N}));var n=r(18),o=(r(64),r(260),r(42),r(53),r(178),r(33),r(256),r(69),r(257)),c=r(55),l=r.n(c);function d(t){try{var a=t.address,e=a.property_name?"".concat(a.property_name,", "):"";return"".concat(e).concat(a.property_number," ").concat(a.road_name,", ").concat(a.city,",  ").concat(a.postcode,",  ").concat(a.country," ")}catch(t){return}}var f=function(t){try{return t.bathrooms}catch(t){return null}};function _(t){if(t&&"contracts"in t&&0!==t.contracts.length)return t.contracts.map((function(t){return t.start_date})).sort()[0]}function h(t){var e=t.split("-"),r=Object(n.a)(e,3),o=r[0],c=r[1],l=r[2];return"".concat(parseInt(l)," ").concat(["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(c)]," ").concat(o)}function m(t){if(t&&"contracts"in t&&0!==t.contracts.length){var e=t.contracts,r=9999999,n=999999;if(e.forEach((function(t,e){t.prices.forEach((function(t){var o=parseInt(t.price_per_person_per_week);o<r&&0!==o&&(r=o,n=e)}))})),9999999!==r)return n}}var v=function(t,e){return"".concat(t).concat(function(t){return 1!==Number(t)}(e)?"s":"")};function y(t){var e,p=t,r="room_details"in p?p.room_details.length:0;return"contracts"in p&&p.contracts.length>0&&"prices"in p.contracts[0]&&(e=p.contracts[0].prices.length),Math.max(r,e)}var x=function(t,e){try{var r=t.contracts[e].prices.map((function(t){return Number(t.price_per_person_per_week)}));return Math.round(Math.ceil(52/12*r.reduce((function(t,e){return t+e}),0)))}catch(t){return}},C=function(t,e){try{var r=t.contracts[e].prices.map((function(t){return Number(t.deposit_per_person)}));return Math.round(r.reduce((function(t,e){return t+e}),0))}catch(t){return}};function k(t,e){for(var r,n=function(t){try{return t.contracts.length}catch(t){return null}}(t),o=99999,i=0;i<n;i++){var c=e(t,i);"number"==typeof(r=c)&&isFinite(r)&&c<o&&(o=c)}if(99999!==o)return o}var w=function(t){return k(t,x)},M=function(t){return k(t,C)},N=function(t,e,r){var n="".concat(o.a,"/properties/").concat(t),body={update_key:e,update_val:r};l.a.patch(n,body).then((function(t){return console.log(t.data)})).catch((function(t){return console.log(t.message)}))}},256:function(t,e,r){"use strict";var n=r(11),o=r(2),c=r(91),l=r(16),d=r(12),f=r(43),_=r(180),h=r(65),m=r(179),v=r(5),y=r(54),x=r(66).f,C=r(34).f,k=r(15).f,w=r(258).trim,M="Number",N=o.Number,I=N.prototype,E=f(y(I))==M,S=function(t){if(h(t))throw TypeError("Cannot convert a Symbol value to a number");var e,r,n,o,c,l,d,code,f=m(t,"number");if("string"==typeof f&&f.length>2)if(43===(e=(f=w(f)).charCodeAt(0))||45===e){if(88===(r=f.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,n)}return+f};if(c(M,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var A,j=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof j&&(E?v((function(){I.valueOf.call(r)})):f(r)!=M)?_(new N(S(e)),r,j):S(e)},O=n?x(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;O.length>P;P++)d(N,A=O[P])&&!d(j,A)&&k(j,A,C(N,A));j.prototype=I,I.constructor=j,l(o,M,j)}},257:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n="https://nuxt-creator-project.herokuapp.com/api"},258:function(t,e,r){var n=r(19),o=r(9),c="["+r(259)+"]",l=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),f=function(t){return function(e){var r=o(n(e));return 1&t&&(r=r.replace(l,"")),2&t&&(r=r.replace(d,"")),r}};t.exports={start:f(1),end:f(2),trim:f(3)}},259:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},260:function(t,e,r){"use strict";var n=r(4),o=r(68),c=r(21),l=r(17),d=r(9),f=r(5),_=r(261),h=r(121),m=r(262),v=r(263),y=r(67),x=r(264),C=[],k=C.sort,w=f((function(){C.sort(void 0)})),M=f((function(){C.sort(null)})),N=h("sort"),I=!f((function(){if(y)return y<70;if(!(m&&m>3)){if(v)return!0;if(x)return x<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)C.push({k:t+r,v:e})}for(C.sort((function(a,b){return b.v-a.v})),r=0;r<C.length;r++)t=C[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:w||!M||!N||!I},{sort:function(t){void 0!==t&&o(t);var e=c(this);if(I)return void 0===t?k.call(e):k.call(e,t);var r,n,f=[],h=l(e.length);for(n=0;n<h;n++)n in e&&f.push(e[n]);for(r=(f=_(f,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:d(e)>d(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=f[n++];for(;n<h;)delete e[n++];return e}})},261:function(t,e){var r=Math.floor,n=function(t,e){var l=t.length,d=r(l/2);return l<8?o(t,e):c(n(t.slice(0,d),e),n(t.slice(d),e),e)},o=function(t,e){for(var element,r,n=t.length,i=1;i<n;){for(r=i,element=t[i];r&&e(t[r-1],element)>0;)t[r]=t[--r];r!==i++&&(t[r]=element)}return t},c=function(t,e,r){for(var n=t.length,o=e.length,c=0,l=0,d=[];c<n||l<o;)c<n&&l<o?d.push(r(t[c],e[l])<=0?t[c++]:e[l++]):d.push(c<n?t[c++]:e[l++]);return d};t.exports=n},262:function(t,e,r){var n=r(52).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},263:function(t,e,r){var n=r(52);t.exports=/MSIE|Trident/.test(n)},264:function(t,e,r){var n=r(52).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},265:function(t,e,r){"use strict";var n=r(4),o=r(71).find,c=r(122),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c(l)},293:function(t,e,r){var content=r(324);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(41).default)("9eef29aa",content,!0,{sourceMap:!1})},323:function(t,e,r){"use strict";r(293)},324:function(t,e,r){var n=r(40)(!1);n.push([t.i,".select-property-container{width:90%;margin:0 auto 10px}.select-property__button{font-size:1.1em;font-weight:500;margin:.8em;padding:6px 20px;background-color:#2cb66a;color:#fff;outline:none;border:none;border-radius:7px;cursor:pointer;transition:.2s}.select-property__button:hover{background-color:#5fabf8}.modal-container{background:rgba(94,94,94,.678);position:absolute;left:0;top:0;height:100%;width:100%;z-index:99}.modal-content-container{background-color:#fff;width:80%;margin:20vh auto 0;padding:20px;border-radius:15px}.select-property__ul{list-style-type:none;padding:0;display:flex;flex-flow:row wrap;justify-content:space-evenly;align-items:center;width:100%;margin:0 auto}.select-property__li{display:inline-block;background-color:#d8f0f3;border:1px solid #ddd;width:31%;margin:5px;padding:5px 7px;box-sizing:border-box;border-radius:8px}.select-property__li:hover{background-color:#7debfa;cursor:pointer}.select-property__title{font-size:.75em;font-weight:700}.select-property__address{font-size:.6em;font-weight:600}.select-property__fa-icon{font-size:.9em;padding:2px 5px}.select-property__num-bathrooms,.select-property__num-bedrooms{display:inline-block;font-size:.7em;padding:2px 5px}",""]),t.exports=n},355:function(t,e,r){var content=r(374);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(41).default)("563d3cd9",content,!0,{sourceMap:!1})},363:function(t,e,r){"use strict";r.r(e);var n=r(255),o={name:"SelectPropertyModal",props:["propertiesData","show_modal"],data:function(){return{properties:void 0}},mounted:function(){document.addEventListener("click",this.handleClickForModal),this.properties=this.propertiesData?this.propertiesData:void 0},updated:function(){!this.properties&&this.propertiesData&&(this.properties=this.propertiesData?this.propertiesData:void 0)},destroyed:function(){document.removeEventListener("click",this.handleClickForModal)},methods:{get_title:function(t){return t?t.room_type:""},get_address_string:function(t){return Object(n.b)(t)},get_num_bedrooms:function(t){return Object(n.h)(t)},get_num_bathrooms:function(t){return Object(n.g)(t)},handleClickForModal:function(t){"modal-container"===t.target.className&&!0===this.show_modal&&this.$emit("closeModal")},handleSelectPropertyClick:function(t){this.$emit("handleSelectPropertyClick",t)},handleClickCloseModal:function(){this.$emit("closeModal")}}},c=(r(323),r(32)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show_modal?r("div",{staticClass:"modal-container"},[r("div",{staticClass:"modal-content-container"},[r("h3",{staticClass:"modal-content__h3"},[t._v("Please select a property to edit")]),t._v(" "),r("ul",{staticClass:"select-property__ul"},t._l(t.properties,(function(e){return r("li",{key:e.property_id,staticClass:"select-property__li",on:{click:function(r){return t.handleSelectPropertyClick(e.property_id)}}},[r("div",{staticClass:"select-property__card"},[r("div",{staticClass:"select-property__title"},[t._v(t._s(t.get_title(e)))]),t._v(" "),r("div",{staticClass:"select-property__address"},[t._v(t._s(t.get_address_string(e)))]),t._v(" "),r("div",{staticClass:"select-property__num-bedrooms-num-bathrooms"},[r("span",{staticClass:"select-property__fa-icon"},[r("font-awesome-icon",{staticClass:"page-heading__fa-icon fa-sm",attrs:{icon:"bed"}})],1),t._v(" "),r("span",{staticClass:"select-property__num-bedrooms"},[t._v(t._s(t.get_num_bedrooms(e)))]),t._v(" "),r("span",{staticClass:"select-property__fa-icon"},[r("font-awesome-icon",{staticClass:"page-heading__fa-icon fa-sm",attrs:{icon:"bath"}})],1),t._v(" "),r("span",{staticClass:"select-property__num-bathrooms"},[t._v(t._s(t.get_num_bathrooms(e)))])])])])})),0),t._v(" "),r("button",{staticClass:"select-property__button",on:{click:t.handleClickCloseModal}},[t._v("Close")])])]):t._e()}),[],!1,null,null,null);e.default=component.exports},373:function(t,e,r){"use strict";r(355)},374:function(t,e,r){var n=r(40)(!1);n.push([t.i,".page-heading-table[data-v-49fb327e],.page-heading-table td[data-v-49fb327e]{border:1px solid grey}.admin-page-container[data-v-49fb327e]{width:100%}.admin-content-container[data-v-49fb327e]{width:90%;margin:0 auto}.select-property-container[data-v-49fb327e]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.select-property__button[data-v-49fb327e]{background-color:#5b8eec;margin:20px auto;text-align:center}.selected-property__div[data-v-49fb327e]{font-size:1.05em;font-weight:600;color:#444;padding:8px 0;margin:0 auto 10px;text-align:center;height:40px}.tabs-container[data-v-49fb327e]{margin:0 auto}.tabs__ul[data-v-49fb327e]{list-style-type:none;display:flex;flex-direction:row;justify-content:center;padding:0;margin:0;position:relative;top:-5px}.tabs__li[data-v-49fb327e]{display:inline-block}.tabs__li a[data-v-49fb327e]{margin:0 1px;padding:5px 12px;background-color:#7669cf;border-top-left-radius:12px;border-top-right-radius:12px;color:#fff;font-size:1em;font-weight:600;cursor:pointer;transition:.2s;text-decoration:none}.tabs__li a[data-v-49fb327e]:hover{background-color:#ba55d3}.tabs__li a.nuxt-link-active[data-v-49fb327e]{background-color:var(--orangey-red-color)}.admin-edit-container[data-v-49fb327e]{width:90%;margin:0 auto 60px;padding:20px 0;border:2px solid #dcdcdc;border-radius:15px;background-color:#f4f4f4;min-height:500px}",""]),t.exports=n},391:function(t,e,r){"use strict";r.r(e);r(13),r(72),r(265),r(64),r(55);var n=r(257),o=r(363),c=r(255),l={name:"Admin",data:function(){return{properties:void 0,show_modal:!0,selected_property_id:void 0,tabs:[{text:"Property Info",route_name:"property_info"},{text:"Room Details",route_name:"room_details"},{text:"Contracts",route_name:"contracts"},{text:"Media",route_name:"media"}]}},components:{SelectPropertyModal:o.default},fetch:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this,e="".concat(n.a,"/properties");fetch(e).then((function(t){return t.json()})).then((function(data){t.properties=data}))})),computed:{selected_property_string:function(){var t=this;if(this.selected_property_id){var e=this.properties.find((function(e){return e.property_id==t.selected_property_id})),r=Object(c.b)(e),n=e.room_type,o=Object(c.h)(e),l=Object(c.g)(e),d=Object(c.i)("bedroom",o),f=Object(c.i)("bathroom",l);return"".concat(n,", ").concat(r,", ").concat(o," ").concat(d,", ").concat(l," ").concat(f)}}},methods:{handleSelectPropertyClick:function(t){this.selected_property_id=t,this.show_modal=!1,this.$router.push({path:"/admin/property_info"})},handleClickOpenModal:function(){this.show_modal=!0},handleClickTab:function(t){this.selected_property_id?this.$router.push({path:"/admin/".concat(t)}):alert("Please select a property to edit")},closeModal:function(){this.show_modal=!1}}},d=(r(373),r(32)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.properties?r("div",{staticClass:"admin-page-container fadeInAnimation"},[r("div",{staticClass:"select-property-container"},[r("button",{staticClass:"select-property__button",on:{click:t.handleClickOpenModal}},[t._v("Select a property to edit")]),t._v(" "),r("SelectPropertyModal",{attrs:{propertiesData:t.properties,show_modal:t.show_modal},on:{handleSelectPropertyClick:t.handleSelectPropertyClick,closeModal:t.closeModal}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.selected_property_id,expression:"selected_property_id"}],staticClass:"selected-property__div"},[t._v("Selected property: "+t._s(t.selected_property_string))])],1),t._v(" "),r("div",{staticClass:"admin-content-container"},[t.show_modal?t._e():r("div",{staticClass:"tabs-container"},[r("ul",{staticClass:"tabs__ul"},t._l(t.tabs.length,(function(e){return r("div",{key:e},[r("li",{staticClass:"tabs__li"},[r("NuxtLink",{ref:t.tabs[e-1].route_name,refInFor:!0,staticClass:"tab",attrs:{to:"/admin/"+t.tabs[e-1].route_name},on:{click:function(r){return t.handleClickTab(t.tabs[e-1].route_name)}}},[t._v("\n                            "+t._s(t.tabs[e-1].text)+"\n                        ")])],1)])})),0)]),t._v(" "),r("div",{staticClass:"admin-edit-container"},[r("NuxtChild",{attrs:{propertiesData:t.properties,property_id:t.selected_property_id}})],1)])]):t._e()}),[],!1,null,"49fb327e",null);e.default=component.exports}}]);